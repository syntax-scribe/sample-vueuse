[‚¨ÖÔ∏è Back to Table of Contents](../index.md)

# üìÑ `export-size.ts`

## üìö Table of Contents

- [Imports](#imports)
- [Functions](#functions)

## üìä Analysis Summary

- **Functions**: 1
- **Classes**: 0
- **Imports**: 8
- **Interfaces**: 0
- **Type Aliases**: 0

## üõ†Ô∏è File Location:
üìÇ **`scripts/export-size.ts`**

## üì¶ Imports

| Name | Source |
|------|--------|
| `join` | `node:path` |
| `resolve` | `node:path` |
| `fileURLToPath` | `node:url` |
| `getExportsSize` | `export-size` |
| `filesize` | `filesize` |
| `markdownTable` | `markdown-table` |
| `packages` | `../meta/packages` |
| `version` | `../package.json` |


---

## Functions

### `run(): Promise<void>`

<details><summary>Code</summary>

```ts
async function run() {
  // made shared library imported can resolve correctly
  const packagesRoot = resolve(__dirname, '..', 'packages')
  await fs.writeFile(join(packagesRoot, 'shared/index.mjs'), 'export * from "./dist/index.mjs"', 'utf-8')
  await fs.writeFile(join(packagesRoot, 'core/index.mjs'), 'export * from "./dist/index.mjs"', 'utf-8')

  let md = '# Export size\n\n'
  const mdJSON = <{ [name: string]: string }>{}
  md += 'generated by [export-size](https://github.com/antfu/export-size)<br>\n'
  md += `version: ${version}<br>\n`
  md += `date: ${new Date().toISOString()}\n\n`

  md += '> Please note this is bundle size for each individual APIs (excluding Vue). '
  md += 'Since we have a lot shared utilities underneath each function, importing two '
  md += 'different functions does NOT necessarily mean the bundle size will be the sum of them (usually smaller). '
  md += 'Depends on the bundler and minifier you use, the final result might vary, this list is for reference only.'
  md += '\n\n'

  for (const pkg of [...packages.slice(2), packages[1]]) {
    const { exports, packageJSON } = await getExportsSize({
      pkg: `./packages/${pkg.name}/dist`,
      output: false,
      bundler: 'rollup',
      external: ['vue', ...(pkg.external || [])],
      includes: ['@vueuse/shared'],
    })

    md += `<kbd>${packageJSON.name}</kbd>\n\n`

    md += markdownTable([
      ['Function', 'min+gzipped'],
      ...exports.map((i) => {
        mdJSON[i.name] = filesize(i.minzipped)
        return [`\`${i.name}\``, filesize(i.minzipped)]
      }),
    ])

    md += '\n\n'
  }

  md = md.replace(/\r\n/g, '\n')

  await fs.rm(join(packagesRoot, 'shared/index.mjs'), { force: true })
  await fs.rm(join(packagesRoot, 'core/index.mjs'), { force: true })
  await fs.writeFile('packages/export-size.md', md, 'utf-8')
  await fs.writeFile('packages/export-size.json', `${JSON.stringify(mdJSON, null, 2)}\n`)
}
```
</details>

- **Return Type**: `Promise<void>`
- **Calls**:
  - `resolve (from node:path)`
  - `fs.writeFile`
  - `join (from node:path)`
  - `new Date().toISOString`
  - `packages.slice`
  - `getExportsSize (from export-size)`
  - `markdownTable (from markdown-table)`
  - `exports.map`
  - `filesize (from filesize)`
  - `md.replace`
  - `fs.rm`
  - `JSON.stringify`
- **Internal Comments**:
```
// made shared library imported can resolve correctly (x2)
```


---

## Classes

> No classes found in this file.


---

## Interfaces

> No interfaces found in this file.


---

## Type Aliases

> No type aliases found in this file.


---